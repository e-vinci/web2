"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[7760],{5964:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var l=t(3905),r=t(7294);function a(e){const n=Object.assign({h1:"h1",p:"p",strong:"strong",ul:"ul",li:"li",br:"br",code:"code",a:"a",pre:"pre",em:"em"},(0,l.ah)(),e.components),{InternalPageMenu:t,PathViewer:a,PathViewerItem:o,InternalPageMenuItem:s,YoutubeImage:i,InternalPageTitle:c,ScrollableImage:m,UnAuthenticatedBlock:d,AuthenticatedBlock:p}=n;return p||u("AuthenticatedBlock",!0),t||u("InternalPageMenu",!0),s||u("InternalPageMenuItem",!0),c||u("InternalPageTitle",!0),a||u("PathViewer",!0),o||u("PathViewerItem",!0),m||u("ScrollableImage",!0),d||u("UnAuthenticatedBlock",!0),i||u("YoutubeImage",!0),r.createElement(r.Fragment,null,r.createElement(n.h1,null,"k) SÃ©curitÃ© des communications du browser"),"\n",r.createElement(t,null,r.createElement(a,null,r.createElement(o,{to:"/"}," web2course "),r.createElement(o,{to:"/part2"}," Partie 2 "),r.createElement(o,{selected:!0}," k) SÃ©curitÃ© des communications du browser ")),r.createElement(s,null," Single Origin Policy & CORS "),r.createElement(s,null," Autorisation d'origines & les CORS "),r.createElement(s,null," Simulation d'une mÃªme origine via un proxy "),r.createElement(s,null," Projet 2.17 : consommation d'opÃ©rations d'une API Ã  l'aide d'un proxy  "),r.createElement(s,null," Project 2.18 : Autorisation de nouvelles origines ")),"\n",r.createElement("div",{className:"card card__simple-youtube-container"},r.createElement(i,{src:"https://youtu.be/mGPKLZpP3A8"})),"\n",r.createElement(n.h1,null,r.createElement(c,null," Single Origin Policy & CORS ")),"\n",r.createElement(n.p,null,"La ",r.createElement(n.strong,null,"Single Origin Policy")," (",r.createElement(n.strong,null,"SOP"),") sont des rÃ¨gles appliquÃ©es par le browser afin :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"de restreindre les interactions entre un document ou script chargÃ© par une origine avec une ressource d'une autre origine ;"),"\n",r.createElement(n.li,null,"d'isoler des documents ou scripts malicieux, afin de rÃ©duire le risque des attaques."),"\n"),"\n",r.createElement(n.p,null,"Deux URL ont une mÃªme ",r.createElement(n.strong,null,"origine")," si ces caractÃ©ristiques sont les mÃªmes :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"protocole")," ;"),"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"port")," ;"),"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"host")," ; l'URL pointe vers le mÃªme appareil connectÃ© Ã  internet ou Ã  un rÃ©seau local."),"\n"),"\n",r.createElement(n.p,null,"Il est possible de relaxer la sÃ©curitÃ© via des ",r.createElement(n.strong,null,"Cross Origin Resource Sharing")," (",r.createElement(n.strong,null,"CORS"),").",r.createElement(n.br),"\n",r.createElement(n.strong,null,"CORS")," est un mÃ©canisme qui utilise des headers HTTP pour indiquer aux browsers qu'ils peuvent autoriser les accÃ¨s Ã  des ressources d'origines diffÃ©rentes."),"\n",r.createElement(n.p,null,"Cela signifie qu'une application web qui utilise une API ne peut le faire que si les ressources demandÃ©es Ã  l'API proviennent d'une mÃªme origine, Ã  moins que la rÃ©ponse de l'API inclut les bonnes ",r.createElement(n.strong,null,"CORS")," (via des header HTTP)."),"\n",r.createElement(n.p,null,"Si l'on autorise trop d'origines, voici un exemple classique d'attaque :"),"\n",r.createElement(m,{name:"cors-issue.png",minWidth:"500px",maxWidth:"700px"}),"\n",r.createElement(n.p,null,"Imaginez qu'un site d'une banque ne soit pas sÃ©curisÃ© avec des techniques modernes. Ce site utiliserait une IHM (",r.createElement(n.strong,null,r.createElement(n.code,null,"https://my-bank.com")),"), qui, via un formulaire, permettrait de faire un versement, sous rÃ©serve d'envoyer un cookie qui contiendrait une variable de session (simple mÃ©canisme de sÃ©curitÃ©) lors d'une requÃªte Ã  l'API de la banque."),"\n",r.createElement(n.p,null,"Maintenant, prenons le cas d'un utilisateur qui adore jouer sur le web, un gamer en puissance. Il joue Ã  un jeu de pinguins, mais soudainement, il est redirigÃ© vers un site malicieux (",r.createElement(n.strong,null,r.createElement(n.code,null,"https://malicious.com")),"), qui lui offre un nouveau jeu avec des dinosaures. Ce site malicieux, en arriÃ¨re plan, pourrait faire une requÃªte vers la mÃªme API utilisÃ©e par ",r.createElement(n.strong,null,r.createElement(n.code,null,"https://my-bank.com")),".",r.createElement(n.br),"\n","Comme c'est le mÃªme browser utilisÃ© par notre gamer, tant pour faire ses virements, que pour jouer, toute requÃªte faite vers ",r.createElement(n.strong,null,r.createElement(n.code,null,"https://api.my-bank.com"))," enverra d'office les cookies existants et associÃ©s au domaine ",r.createElement(n.strong,null,r.createElement(n.code,null,"api.my-bank.com")),".\r\nLes rÃ©sultats peuvent Ãªtre dramatiques : l'attaquant Ã  la capacitÃ© de faire des versements jusqu'Ã  vider le compte de notre pauvre gamer."),"\n",r.createElement(n.p,null,"Bien sÃ»r, grÃ¢ce Ã  la ",r.createElement(n.strong,null,"SOP")," appliquÃ©e par nos browser, par dÃ©faut, dÃ¨s que le site malicieux communique avec l'API de la banque, celui-ci bloque l'accÃ¨s aux ressources de l'API car l'origine du site malicieux est diffÃ©rente de l'origine de l'API."),"\n",r.createElement(n.p,null,"Les ",r.createElement(n.strong,null,"CORS")," permettent de relÃ¢cher la sÃ©curitÃ©, afin notamment, dans le scÃ©nario Ã©voquÃ©, d'autoriser l'origine ",r.createElement(n.strong,null,r.createElement(n.code,null,"https://my-bank.com"))," Ã  accÃ©der Ã  l'origine ",r.createElement(n.strong,null,r.createElement(n.code,null,"https://api.my-bank.com")),". En effet, c'est ce que le site de la banque souhaite.",r.createElement(n.br),"\n","Par contre, si la banque possÃ¨de des dÃ©veloppeurs nuls au niveau sÃ©curitÃ© et que ceux-ci autorisent toutes les origines Ã  interroger l'API, lÃ , nous pourrions arriver au hacking dÃ©crit ci-dessus."),"\n",r.createElement(n.p,null,"Nous allons voir comment nous pouvons communiquer entre un frontend et une API fonctionnant sous deux origines diffÃ©rentes, Ã  l'aide de deux techniques diffÃ©rentes."),"\n",r.createElement(n.h1,null,r.createElement(c,null," Autorisation d'origines & les CORS ")),"\n",r.createElement(n.p,null,"A cette partie-ci, nous allons voir comment mettre Ã  jour une API afin que dans chaque rÃ©ponse faite Ã  un client, on ajoute un header permettant d'autoriser une ou plusieurs origines."),"\n",r.createElement(n.p,null,"Pour ce nouveau tutoriel, nous allons partir de la derniÃ¨re version de la RESTful API de pizzas."),"\n",r.createElement(n.p,null,"Au sein de votre repo ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),", veuillez crÃ©er le projet nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/cors"))," sur base d'un copiÃ© collÃ© de ",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/fat-model"))," (ou ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"fat-model"),")."),"\n",r.createElement(n.p,null,"Pour la suite du tutoriel, nous considÃ©rons que tous les chemins absolus dÃ©marrent du rÃ©pertoire\r\n",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/cors")),"."),"\n",r.createElement(n.p,null,"Dans ce projet, veuillez installer le package ",r.createElement(n.strong,null,r.createElement(n.code,null,"cors"))," :"),"\n",r.createElement(n.pre,null,r.createElement(n.code,{className:"language-bash"},"npm i cors\n")),"\n",r.createElement(n.p,null,"Nous allons configurer les headers de la RESTful API Ã  l'aide du middleware ",r.createElement(n.strong,null,"cors")," offert par\r\nla librairie ",r.createElement(n.strong,null,"cors"),"."),"\n",r.createElement(n.p,null,"Pour configurer et utiliser les ",r.createElement(n.strong,null,"CORS"),", veuillez mettre Ã  jour le fichier ",r.createElement(n.strong,null,r.createElement(n.code,null,"/app.js"))," :"),"\n",r.createElement(n.pre,{numbered:!0,highlighting:"4-8,21"},r.createElement(n.code,{className:"language-js"},"const express = require('express');\r\nconst cookieParser = require('cookie-parser');\r\nconst logger = require('morgan');\r\nconst cors = require('cors');\r\n\r\nconst corsOptions = {\r\n  origin: 'http://localhost:8080',\r\n};\r\n\r\nconst usersRouter = require('./routes/users');\r\nconst pizzaRouter = require('./routes/pizzas');\r\n\r\nconst app = express();\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\n\r\napp.use('/users', usersRouter);\r\napp.use('/pizzas', cors(corsOptions), pizzaRouter);\r\n\r\nmodule.exports = app;\n")),"\n",r.createElement(n.p,null,"Ici, nous prÃ©cisons que l'API doit autoriser l'origine associÃ©e au port sur lequel tourne\r\nle serveur de fichiers statiques de Webpack (",r.createElement(n.strong,null,r.createElement(n.code,null,"8080")),'). Notons que nous n\'avons pas relÃ¢chÃ© la sÃ©curitÃ© pour les ressources de type "users", la fonction middleware ',r.createElement(n.strong,null,r.createElement(n.code,null,"cors"))," n'est pas appelÃ©e au niveau du router de pizza."),"\n",r.createElement(n.p,null,"Veuillez stopper l'Ã©ventuelle ancienne version de l'API, si elle est exÃ©cutÃ©e, et dÃ©marrer votre nouvelle version de l'API (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/cors")),")."),"\n",r.createElement(n.p,null,"Il vous reste Ã  vous assurer que votre frontend (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch-no-proxy")),") est lui aussi bien dÃ©marrÃ© et peut rÃ©aliser son fetch implÃ©mentÃ© dans ",r.createElement(n.strong,null,r.createElement(n.code,null,"HomePage.js")),"."),"\n",r.createElement(n.p,null,"Tout fonctionne correctement ?"),"\n",r.createElement(n.p,null,"Normalement oui, vous devriez avoir le site de la pizzeria qui affiche le menu des pizzas suite Ã  un appel Ã  l'API."),"\n",r.createElement(n.p,null,"Si tout fonctionne bien, faites un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre repo (",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") avec comme message :\r\n",r.createElement(n.strong,null,r.createElement(n.code,null,"api-cors tutorial")),"."),"\n",r.createElement(n.p,null,"En cas de souci, vous pouvez accÃ©der au code du tutoriel ici :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"pour l'API : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/cors"},"api-cors"),"."),"\n",r.createElement(n.li,null,"pour le frontend :\r\n",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch-no-proxy"},"basic-fetch-no-proxy-hmi"),"."),"\n"),"\n",r.createElement(n.p,null,"ðŸ’­ OK, Ã§a fonctionne bien... Mais cela est possible seulement si nous sommes les propriÃ©taires de la RESTful API. Maintenant, que faire si une API tierce doit Ãªtre intÃ©grÃ©e dans notre frontend ?",r.createElement(n.br),"\n","Imaginez que vous souhaitez intÃ©grer une opÃ©ration d'une API offerte par Google...",r.createElement(n.br),"\n","Pensez-vous que vous pouvez leur donner un coup de fil et dire : ",r.createElement(n.em,null,'"Google, peux-tu STP autoriser l\'origine associÃ©e Ã  mon site web ?"...'),r.createElement(n.br),"\n","Nous allons voir un autre moyen de contourner la ",r.createElement(n.strong,null,"SOP")," (Single Origin Policy) imposÃ©e par le browser."),"\n",r.createElement(n.h1,null,r.createElement(c,null," Simulation d'une mÃªme origine via un proxy ")),"\n",r.createElement(n.p,null,"Il est possible de mettre en place un proxy au niveau du frontend afin de faire croire au browser que l'API et le frontend ont la mÃªme origine."),"\n",r.createElement(n.p,null,"Ici, nous sommes dans la situation oÃ¹ nous ne souhaitons pas, ou nous n'avons pas les moyens, d'ajouter des origines au niveau de l'API."),"\n",r.createElement(n.p,null,"Veuillez stopper l'exÃ©cution de l'API (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/cors")),") et du frontend (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch-no-proxy")),")."),"\n",r.createElement(n.p,null,"Veuillez dÃ©marrer l'API qui n'autorise aucune autre origine : ",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/api/fat-model"))," (ou via le code de ce web repo si vous avez un souci : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"api-fat-model"),")."),"\n",r.createElement(n.p,null,"Nous allons mettre en place un mÃ©canisme au niveau du frontend pour faire passer toutes les requÃªtes Ã  destination de l'API par un proxy ; le proxy aura la mÃªme origine que le serveur de fichiers statiques ayant offert le frontend."),"\n",r.createElement(n.p,null,"Pour ce nouveau tutoriel, au sein de votre repo ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),", veuillez crÃ©er le projet nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch"))," sur base d'un copiÃ©/collÃ© de ",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch-no-proxy"))," (ou ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch-no-proxy"},"basic-fetch-no-proxy-hmi"),")."),"\n",r.createElement(n.p,null,"Il vous reste aussi Ã  vous assurer que votre frontend (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch")),") est lui aussi bien dÃ©marrÃ©. Il devrait toujours y avoir l'erreur associÃ©e aux ",r.createElement(n.strong,null,"CORS")," donnÃ©e au sein de la console."),"\n",r.createElement(n.p,null,"Voici le workflow que nous allons appliquer Ã  notre site gÃ©rant la pizzeria :"),"\n",r.createElement(m,{name:"proxy.png",minWidth:"691px",maxWidth:"691px"}),"\n",r.createElement("figcaption",null,"Redirections des requÃªtes via un proxy"),"\n",r.createElement(n.p,null,"GrÃ¢ce Ã  ce diagramme, on voit comment mettre Ã  jour le tutoriel prÃ©cÃ©dent qui affichait une erreur au niveau des ",r.createElement(n.strong,null,"CORS")," : on va faire une requÃªte GET vers ",r.createElement(n.strong,null,r.createElement(n.code,null,"/api/pizzas"))," et non plus vers ",r.createElement(n.strong,null,r.createElement(n.code,null,"http://localhost:3000/pizzas")),"."),"\n",r.createElement(n.p,null,"Le serveur de dÃ©veloppement de Webpack met Ã  disposition un proxy. Celui-ci est d'ailleurs configurÃ© ainsi dans le boilerplate (voir fichier ",r.createElement(n.strong,null,r.createElement(n.code,null,"./webpack.config.js")),") :"),"\n",r.createElement(n.pre,null,r.createElement(n.code,{className:"language-js"},"proxy: {\r\n      '/api': {\r\n        target: 'http://localhost:3000',\r\n        pathRewrite: { '^/api': '' },\r\n      },\r\n    },\n")),"\n",r.createElement(n.p,null,"Cela signifie qu'Ã  chaque fois qu'une requÃªte sera faite sur ",r.createElement(n.strong,null,r.createElement(n.code,null,"/api"))," (on reste sur la mÃªme origine que le serveur de fichiers statiques, ",r.createElement(n.strong,null,r.createElement(n.code,null,"8080"))," tel que configurÃ© dans ",r.createElement(n.strong,null,r.createElement(n.code,null,"./webpack.config.js"))," du boilerplate), celle-ci sera redirigÃ©e vers le port ",r.createElement(n.strong,null,r.createElement(n.code,null,"3000")),", le port de l'API.\r\nLe ",r.createElement(n.strong,null,r.createElement(n.code,null,"pathRewrite"))," permet de ne pas reprendre ",r.createElement(n.strong,null,r.createElement(n.code,null,"/api"))," dans l'URL de la redirection :\r\n",r.createElement(n.strong,null,r.createElement(n.code,null,"GET /api/pizzas"))," devient ",r.createElement(n.strong,null,r.createElement(n.code,null,"GET http://localhost:3000/pizzas")),"."),"\n",r.createElement(n.p,null,"Dans le code du tutoriel en cours (",r.createElement(n.strong,null,r.createElement(n.code,null,"/web2/tutorials/pizzeria/hmi/basic-fetch")),"), veuillez mettre Ã  jour l'URL au niveau du ",r.createElement(n.strong,null,r.createElement(n.code,null,"fetch"))," dans ",r.createElement(n.strong,null,r.createElement(n.code,null,"HomePage.js"))," :"),"\n",r.createElement(n.pre,{numbered:!0,highlighting:"4"},r.createElement(n.code,{className:"language-js"},"const HomePage = () => {\r\n  clearPage();\r\n\r\n  fetch('/api/pizzas')\r\n    .then((response) => {\r\n      if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n      return response.json();\r\n    })\r\n    .then((pizzas) => {\r\n      renderMenuFromString(pizzas);\r\n      attachOnMouseEventsToGoGreen();\r\n      renderDrinksFromNodes(DRINKS);\r\n    })\r\n    .catch((err) => {\r\n      console.error('HomePage::error: ', err);\r\n    });\r\n};\n")),"\n",r.createElement(n.p,null,"A ce stade-ci, tout devrait fonctionner : le menu des pizzas est affichÃ© suite Ã  l'appel Ã  notre RESTful API ne relaxant pas la sÃ©curitÃ© !"),"\n",r.createElement(n.p,null,"Si tout fonctionne bien, faites un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre repo (",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") avec comme message :\r\n",r.createElement(n.strong,null,r.createElement(n.code,null,"basic-fetch-hmi with proxy tutorial")),"."),"\n",r.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"pour le frontend : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch"},"basic-fetch-hmi"),"."),"\n",r.createElement(n.li,null,"pour l'API : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"api-fat-model"),"."),"\n"),"\n",r.createElement(n.p,null,"ðŸ¬ Voici quelques infos non capitales pour ce cours-ci :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Il existe une multitude de proxy pour un environnement de dÃ©veloppement : ",r.createElement(n.strong,null,r.createElement(n.code,null,"Webpack devServer"))," et son proxy, ",r.createElement(n.strong,null,r.createElement(n.code,null,"VS Code proxy")),", proxy lÃ©ger de ",r.createElement(n.strong,null,r.createElement(n.code,null,"Node"))," directement configurable via ",r.createElement(n.strong,null,r.createElement(n.code,null,"package.json"))," (",r.createElement(n.strong,null,r.createElement(n.code,null,'"proxy": "http://localhost:3000",')),"), ..."),"\n",r.createElement(n.li,null,"Il existe par exemple un proxy complet sous Node : ",r.createElement(n.strong,null,r.createElement(n.code,null,"http-proxy-middleware")),"."),"\n",r.createElement(n.li,null,"Pour la production, lorsque vous dÃ©ployer une application web sur le cloud, il faudra trouver les instructions de votre provider pour voir comment configurer le proxy.",r.createElement(n.br),"\n","Par exemple, pour configurer un ",r.createElement(n.strong,null,"static file server")," et son ",r.createElement(n.strong,null,"proxy")," sous ",r.createElement(n.strong,null,"heroku")," (provider de services d'hÃ©bergements sur le cloud), il faut configurer le fichier ",r.createElement(n.strong,null,r.createElement(n.code,null,"/static.json")),"."),"\n"),"\n",r.createElement(n.p,null,"ðŸ’­ Que pensez-vous du code associÃ© aux tÃ¢ches asynchrones, afin de chaÃ®ner des actions suite au ",r.createElement(n.strong,null,r.createElement(n.code,null,"fetch"))," ?",r.createElement(n.br),"\n","Ca n'est pas des plus lisibles... imaginez que vous ayez des tonnes de ",r.createElement(n.strong,null,r.createElement(n.code,null,".then()"))," Ã  gÃ©rer, dans lesquels vous allez aussi faire appel Ã  des fonctions asynchrones... Ca deviendra vite compliquÃ© comme code."),"\n",r.createElement(n.p,null,"Nous allons donc tout prochainement voir comment rendre la programmation asynchrone plus lÃ©gÃ¨re, Ã  l'aide de promesses et de ",r.createElement(n.strong,null,r.createElement(n.code,null,"async"))," / ",r.createElement(n.strong,null,r.createElement(n.code,null,"await")),"."),"\n",r.createElement(n.h1,null,r.createElement(c,null," Projet 2.17 : consommation d'opÃ©rations d'une API Ã  l'aide d'un proxy  ")),"\n",r.createElement(n.p,null,"Veuillez enrichir la SPA dÃ©veloppÃ©e dans le cadre de votre projet en lui ajoutant :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Une RESTful API offrant une opÃ©ration de lecture sur des ressources ;"),"\n",r.createElement(n.li,null,"Une page Ã  votre frontend pour afficher les ressources offertes par l'opÃ©ration de lecture de la RESTful API."),"\n"),"\n",r.createElement(n.p,null,'Dans un premier temps, identifiez le type de ressources qui aurait du sens Ã  Ãªtre affichÃ©e dans votre SPA.\r\nCela sera peut-Ãªtre des ressources de type "Ã©vÃ©nements", "utilisateurs", "scores", "recettes"...'),"\n",r.createElement(n.p,null,"Vous allez donc dÃ©velopper deux applications :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Pour votre frontend : veuillez repartir du code de ",r.createElement(n.a,{href:"../animations/#projet_2_14_animation"},"Projet 2.14"),".",r.createElement(n.br),"\n","Le code du frontend doit se trouver dans votre repository local et votre web repository (normalement appelÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") dans le rÃ©pertoire nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.17/frontend")),"."),"\n",r.createElement(n.li,null,"Pour votre API : le code doit se trouver dans votre repository local et votre web repository (normalement appelÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") dans le rÃ©pertoire nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.17/api")),"."),"\n"),"\n",r.createElement(d,null,r.createElement(n.p,null,"Si vous avez choisi comme projet de travailler sur l'application ",r.createElement(n.strong,null,r.createElement(n.code,null,"myMovies")),", alors :"),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"vous pouvez directement utiliser votre API existante dÃ©veloppÃ©e pour l'",r.createElement(n.a,{href:"../../part1/refactoring/#exercice_1_9_refactoring_a_laide_dun_fat_model"},"Exercice 1.9"),"."),"\n",r.createElement(n.li,null,"pour le frontend, vous allez simplement mettre Ã  jour la ",r.createElement(n.strong,null,r.createElement(n.code,null,"ViewMoviePage"))," afin de consommer l'opÃ©ration de lecture de films de l'API pour afficher tous les films."),"\n")),"\n",r.createElement(p,null,r.createElement(n.p,null,"Veuillez travailler avec les membres de votre groupe.",r.createElement(n.br),"\n","Il est intÃ©ressant que vous vous partagiez le travail :"),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"certains membres de l'Ã©quipe travail sur le dÃ©veloppement de l'API ;"),"\n",r.createElement(n.li,null,"les autres travaillent sur le frontend."),"\n"),r.createElement(n.p,null,'Quand vous travaillez sur le code de votre projet, vous pouvez aussi directement travailler sur le web repo de votre groupe. Dans ce cas-ci, vous devriez crÃ©er deux "feature branches" :'),r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"une pour l'API ;"),"\n",r.createElement(n.li,null,"une pour le frontend."),"\n"),r.createElement(n.p,null,'Une fois que vos prototypes sont prÃªts, vous pouvez "merger" vos "feature branches" Ã  la branche principal du web repo de votre groupe.'),r.createElement(n.p,null,"NÃ©anmoins, il peut Ãªtre intÃ©ressant de d'abord fournir un prototype de votre code dans votre web repo personnel au sein de ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.17/frontend"))," et ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.17/api")),"."),r.createElement(n.p,null,"Quand un prototype d'api est finalisÃ©, veuillez faire un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre code avec comme message : ",r.createElement(n.strong,null,r.createElement(n.code,null,"2.17 : api read operation")),".")),"\n",r.createElement(n.p,null,"Au niveau du frontend, vous devez afficher des ressources offertes par une opÃ©ration de lecture de votre API, ",r.createElement(n.strong,null,"en utilisant le proxy offert par webpack")," !"),"\n",r.createElement(n.p,null,"Quand un prototype de frontend est finalisÃ©, veuillez faire un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre code avec comme message : ",r.createElement(n.strong,null,r.createElement(n.code,null,"2.17 : frontend basic proxy to render ressources")),"."),"\n",r.createElement(n.h1,null,r.createElement(c,null," Project 2.18 : Autorisation de nouvelles origines ")),"\n",r.createElement(n.p,null,"Vous devez mettre Ã  jour l'API dÃ©veloppÃ©e pour ",r.createElement(n.a,{href:"#projet_2_17_consommation_doperations_dune_api_a_laide_dun_proxy"},"Project 2.17")," afin d'autoriser les origines locales fonctionnant sur ces ports : ",r.createElement(n.strong,null,r.createElement(n.code,null,"8080")),", ",r.createElement(n.strong,null,r.createElement(n.code,null,"7000"))," et ",r.createElement(n.strong,null,r.createElement(n.code,null,"666")),"."),"\n",r.createElement(n.p,null,"Vous devez aussi mettre Ã  jour le frontend dÃ©veloppÃ© pour ",r.createElement(n.a,{href:"#projet_2_17_consommation_doperations_dune_api_a_laide_dun_proxy"},"Project 2.17")," pour ne plus utiliser le proxy du frontend. Vous consommez directement l'API en indiquant son URL complÃ¨te, y compris le port.",r.createElement(n.br),"\n",r.createElement(n.em,null,'Par exemple, si vous traitiez de ressources de type "films", vous devez faire un ',r.createElement(n.strong,null,r.createElement(n.code,null,"fetch"))," avec comme URL : ",r.createElement(n.strong,null,r.createElement(n.code,null,"http://localhost:3000/films")),".")),"\n",r.createElement(n.p,null,"Vous allez donc adapter deux applications :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Pour votre frontend : veuillez repartir du code de ",r.createElement(n.a,{href:"#projet_2_17_consommation_doperations_dune_api_a_laide_dun_proxy"},"Project 2.17"),".",r.createElement(n.br),"\n","Le code du frontend doit se trouver dans votre repository local et votre web repository (normalement appelÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") dans le rÃ©pertoire nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.18/frontend")),"."),"\n",r.createElement(n.li,null,"Pour votre API : veuillez aussi repartir du code de ",r.createElement(n.a,{href:"#projet_2_17_consommation_doperations_dune_api_a_laide_dun_proxy"},"Project 2.17"),". Le code doit se trouver dans votre repository local et votre web repository (normalement appelÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"web2")),") dans le rÃ©pertoire nommÃ© ",r.createElement(n.strong,null,r.createElement(n.code,null,"/project/2.18/api")),"."),"\n"),"\n",r.createElement(n.p,null,"Quand un prototype d'api est finalisÃ©, veuillez faire un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre code avec comme message : ",r.createElement(n.strong,null,r.createElement(n.code,null,"2.18 : api with new origins")),"."),"\n",r.createElement(n.p,null,"Quand un prototype de frontend est finalisÃ©, veuillez faire un ",r.createElement(n.strong,null,r.createElement(n.code,null,"commit"))," de votre code avec comme message : ",r.createElement(n.strong,null,r.createElement(n.code,null,"2.18 : frontend render ressources with no proxy")),"."))}var o=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?r.createElement(n,e,r.createElement(a,e)):a(e)};function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var s=t(4160),i=t(5583),c=t(5679),m=t(307),d=t(7410),p=t(9523),E=t(8075),g=t(9063),f=t(1631),v=t(5772),h=t(2770),b=t(7008),P=t(9771),z=t(1218),q=(t(5258),t(9394)),x=t(4579),I=t(7743),y=t(9256),w=t(6488),j=t(5175),A=t(6387),_=t(6044);const S={Link:s.Link,Image:c.Z,Section:m.Z,Content:d.Z,Background:p.Z,SectionHeader:E.Z,SectionFooter:g.Z,PageHeader:f.Z,CodeBlock:h.Z,LinkFile:b.Z,ScrollableImage:P.Z,PublicProjectsView:z.Z,AuthenticatedBlock:q.Z,UnAuthenticatedBlock:x.Z,NestedMdxBlock:I.Z,YoutubeImage:y.Z,InternalPageMenu:w.Z,InternalPageMenuItem:j.Z,InternalPageTitle:A.Z,PathViewer:_.k,PathViewerItem:_.F};function k(e){var n,t,a,o,u;let{data:{mdx:s,allImages:c},children:m}=e;return S.PageHeader=(0,v.u)(f.Z,null==s?void 0:s.frontmatter),r.createElement(i.Z,Object.assign({},null!=s&&s.frontmatter?{frontmatter:s.frontmatter}:{},null!=s&&null!==(n=s.frontmatter)&&void 0!==n&&n.navbarExtraStyles?{navbarExtraStyles:s.frontmatter.navbarExtraStyles}:{},null!=s&&null!==(t=s.frontmatter)&&void 0!==t&&t.headerImage?{headerImage:s.frontmatter.headerImage}:{},null!=s&&null!==(a=s.frontmatter)&&void 0!==a&&a.featuredImage?{featuredImage:s.frontmatter.featuredImage}:{},null!=s&&null!==(o=s.frontmatter)&&void 0!==o&&o.title?{pageTitle:s.frontmatter.title}:{},c&&c.length>0?{allImages:c}:{}),r.createElement(l.Zo,{components:S},r.createElement("div",{className:null!=s&&null!==(u=s.frontmatter)&&void 0!==u&&u.autoMargin?"page page--auto-margin ":"page"},m)))}function R(e){return r.createElement(k,e,r.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-2-comms-security-fr-mdx-614a9eebabea20d0a5d6.js.map
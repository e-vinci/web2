"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[355],{89802:function(e,t,r){var n=r(67294),a=r(16267),c=r.n(a);t.Z=function(e){var t,r,a=e.className,o=e.isBeingEdited,s=e.onChange,i=e.startContent,u=e.id,d=e.isInline,l=e.children;return o?t=i?c().decode(i):"":l?t=l:i&&(t=i?c().decode(i):""),r=a||"",o&&(r+=" index__card__content__description--is-being-edited"),d&&(r+=" index__card__content__description--is-inline"),n.createElement("div",{className:r,contentEditable:!!o,onInput:function(e){var t={};t[u]=e.currentTarget.textContent,s(t)},suppressContentEditableWarning:!0},t)}},3290:function(e,t,r){r.d(t,{X:function(){return m},a:function(){return f}});var n=r(4942),a=r(15861),c=r(87757),o=r.n(c),s=r(67294),i=r(20693),u=r(8709),d=r(70144);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p=s.createContext([{},function(){},{},function(){},{},function(){},{},function(){}]),f=function(e){var t=e.children,r=(0,s.useState)(void 0),n=r[0],a=r[1],c=(0,s.useState)(void 0),o=c[0],i=c[1],u=(0,s.useState)(void 0),d=u[0],l=u[1],f=(0,s.useState)(!1),m=f[0],v=f[1];return s.createElement(p.Provider,{value:[n,a,o,i,d,l,m,v]},t)},m=function(){var e=(0,u.Fp)(),t=e.instance,r=e.accounts,c=(0,s.useContext)(p),f=c[0],m=c[1],v=c[2],_=c[3],h=c[4],x=c[5],j=c[6],b=c[7],E=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projectgroups/"+n,"get",a,void 0);case 6:return c=e.sent,m(c),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(0),console.error("useProjectData:error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("users/role/?projectgroupname="+n,"get",a,void 0);case 6:return c=e.sent,_(c),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(0),console.error("useProjectData:updateUserData:error:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,b(!1),e.next=7,(0,i.Z)("projects/projectgroups/"+n,"get",a,void 0);case 7:return c=e.sent,x(c),b(!0),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),console.error("useProjectData:updateProjectDataerror:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects","post",a,{projectGroupName:n});case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.error("useProjectData:addOneProject:error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+n._id,"DELETE",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.error("useProjectData:deleteOneProject:error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+n._id+"/member","POST",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.error("useProjectData:addMemberToProject:error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+n._id+"/member","DELETE",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.error("useProjectData:deleteMemberFromProject:error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,a.Z)(o().mark((function e(n,a){var c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(r,t);case 3:return c=e.sent,e.next=6,(0,i.Z)("projects/"+a,"PATCH",c,n);case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0),console.error("useProjectData:updateProject:error:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}();return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{projectGroupData:f,updateProjectGroupData:E,userData:v,updateUserData:g,projectData:h,updateProjectData:P,addOneProject:w,deleteOneProject:k,addMemberToProject:y,deleteMemberFromProject:C,updateProject:O,isLoaded:j,setIsLoaded:b})}},87008:function(e,t,r){var n=r(63366),a=r(67294),c=r(1597),o=["children","name"];t.Z=function(e){var t=e.children,r=e.name,s=(0,n.Z)(e,o),i=(0,c.useStaticQuery)("3028011774");if(r&&r.toLowerCase().includes("http://")||r&&r.toLowerCase().includes("https://"))return a.createElement("a",Object.assign({href:r},s),t);var u=i.allFile.edges.find((function(e){return e.node.base===r}));return u?a.createElement("a",Object.assign({href:u.node.publicURL},s),t):a.createElement("div",null,a.createElement("h3",{style:{color:"red"}},"The file ",r," does not exist !"),t)}},99896:function(e,t,r){var n=r(67294),a=r(33364),c=r(35514);t.Z=function(){return n.createElement("div",{className:"spinner"},n.createElement("div",{className:"spinner__overlay"}),n.createElement("div",{className:"spinner__animation"},n.createElement(a.G,{icon:c.LM3,className:"fa-3x fa-spin"})))}},18329:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(67294),a=r(1597),c=r(69233),o=r(41066),s=r(3290),i=r(15861),u=r(87757),d=r.n(u),l=r(49256),p=r(4942),f=(r(16267),r(33364)),m=r(35514),v=r(43405),_=r(89802);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){var t=e.project,r=e.setFilteredContents,a=(0,n.useState)(!1),c=a[0],o=a[1],u=(0,n.useState)(t.isPublic),p=u[0],h=u[1],j=(0,n.useState)({}),b=j[0],E=j[1],g=(0,s.X)(),P=g.deleteOneProject,w=g.updateProjectData,k=g.addMemberToProject,y=g.deleteMemberFromProject,C=g.updateProject,O=g.userData,N=g.projectGroupData,D=g.projectData,Z=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return e.next=4,w(t.projectGroupName);case 4:r(void 0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:if(e.sent,!w){e.next=7;break}return e.next=6,w(t.projectGroupName);case 6:r(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:if(e.sent,!w){e.next=7;break}return e.next=6,w(t.projectGroupName);case 6:r(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=10;break}return e.next=3,C(b,t._id);case 3:if(n=e.sent,E({}),o(!1),!n){e.next=10;break}return e.next=9,w(t.projectGroupName);case 9:r(void 0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){E((function(t){return x(x({},t),e)}))};return t?n.createElement("div",{className:"index__card"+(c?" index__card--is-being-edited":""),key:t.shortId,id:t.shortId},n.createElement("div",{className:"index__card__header"},n.createElement("span",null,"Projet N° "+t.shortId+" : "),n.createElement(_.Z,{isBeingEdited:c,id:"name",onChange:M,startContent:t.name,isInline:!0})),n.createElement("div",{className:"index__card__description"},O.isAdmin&&n.createElement(f.G,{icon:m.I7k,onClick:Z}),(O.isAdmin||t.projectMembers.includes(O.userName)&&"end"!==N.status)&&!c?n.createElement(f.G,{icon:m.Xcf,onClick:function(){o(!0)}}):"","init"===N.status&&!D.find((function(e){return e.projectMembers.includes(O.userName)}))&&t.projectMembers.length<N.maximumProjectMembers&&n.createElement(f.G,{icon:m.FKd,onClick:F}),"init"===N.status&&t.projectMembers.includes(O.userName)&&n.createElement(f.G,{icon:m.iC0,onClick:G}),c&&n.createElement(f.G,{icon:m.r6l,onClick:S}),c&&n.createElement(f.G,{icon:m.NBC,onClick:function(){o(!1),E({})}})),n.createElement("div",{className:"index__card__content"},void 0!==t.description?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Description"),n.createElement(_.Z,{className:"index__card__content__description",isBeingEdited:c,id:"description",startContent:t.description,onChange:M})):""),n.createElement("div",{className:"index__card__content"},void 0!==t.presentationUrl?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Vidéo de présentation"),n.createElement(_.Z,{className:"index__card__content__description",isBeingEdited:c,id:"presentationUrl",startContent:t.presentationUrl,onChange:M},n.createElement(l.Z,{src:t.presentationUrl}))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.frontendProductionUrl?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"URL du site"),n.createElement(_.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendProductionUrl",startContent:t.frontendProductionUrl,onChange:M},n.createElement("a",{href:t.frontendProductionUrl,target:"_blank"},t.frontendProductionUrl))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.frontendRepo?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Repo frontend"),n.createElement(_.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendRepo",startContent:t.frontendRepo,onChange:M},n.createElement("a",{href:t.frontendRepo,target:"_blank"},t.frontendRepo))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.backendRepo?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Repo backend"),n.createElement(_.Z,{className:"index__card__content__description",isBeingEdited:c,id:"backendRepo",startContent:t.backendRepo,onChange:M},n.createElement("a",{href:t.backendRepo,target:"_blank"},t.backendRepo))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.projectMembers&&t.projectMembers.length>0?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Membres du projet"),n.createElement("div",{className:"index__card__content__description"},t.projectMembers.map((function(e){return(0,v.w)(e)})).join(", "))):""),n.createElement("div",{className:"index__card__content"},void 0!==t.isPublic?n.createElement(n.Fragment,null,n.createElement("div",{className:"index__card__content__title"},"Public ?"),n.createElement("div",{className:"index__card__content__description"},n.createElement("input",{type:"checkbox",checked:p,disabled:!c,onClick:function(e){h(!p),E(x(x({},b),{isPublic:!p}))}}))):"")):null},b=function(e){var t=e.projects,r=e.setFilteredContents;return!t||t.length<=0?null:n.createElement(n.Fragment,null,t.map((function(e){return n.createElement(j,{project:e,setFilteredContents:r})})))},E=r(99896),g=r(87008),P=function(e){var t=e.associatedProjectGroupName,r=e.projectDocument,a=(0,s.X)(),c=a.projectGroupData,o=a.updateProjectGroupData,u=a.userData,l=a.updateUserData,p=a.isLoaded,f=a.projectData,m=a.addOneProject,v=a.updateProjectData,_=(0,n.useState)(void 0),h=_[0],x=_[1],j=(0,n.useState)(""),P=(j[0],j[1]),w=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(c._id);case 2:return e.next=4,v(c._id);case 4:e.sent,x(void 0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){k()}),[]);var k=function(){var e=(0,i.Z)(d().mark((function e(){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(t);case 3:return r=e.sent,e.next=6,l(t);case 6:return e.sent,e.next=9,v(r._id);case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("getData:error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return n.createElement(n.Fragment,null,!p&&n.createElement(E.Z,null),void 0===c?"":n.createElement("div",{className:"pl-3 pt-3 pb-3 pr-3"},n.createElement("h3",{className:""},"Projets des groupes de ",null==c?void 0:c._id),r&&n.createElement(g.Z,{name:r},"Consignes & template du projet"),n.createElement("div",{className:"index"},n.createElement("input",{type:"text","aria-label":"Search",placeholder:"Filtrez les contenus...",onChange:function(e){var t=e.target.value;P(e.target.value);var r=f.filter((function(e){var r=e.shortId,n=e.name,a=e.description;return n.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||t.length>0&&parseInt(t)===r}));r&&r.length>0?x(r):x(void 0)},className:"index__search"}),h&&h.length>0?n.createElement(b,{projects:h,setFilteredContents:x}):n.createElement(b,{projects:f,setFilteredContents:x})),void 0!==u&&u.isAdmin?n.createElement("button",{className:"index__button",onClick:w},"Ajouter projet"):""))},w=(0,o.O)((function(){var e=(0,a.useStaticQuery)("641954533"),t=null==e?void 0:e.site.siteMetadata,r=t.defaultAssociatedProjectGroupName,o=t.projectDocument;return n.createElement(s.a,null,n.createElement(c.Z,null,n.createElement(P,{associatedProjectGroupName:r,projectDocument:o})))}))},20693:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(15861),a=r(87757),c=r.n(a);function o(e,t,r,n){return s.apply(this,arguments)}function s(){return(s=(0,n.Z)(c().mark((function e(t,r,n,a){var o,s,i,u,d,l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r="get"),o=new Headers,(s={}).method=r,n&&(i="Bearer "+n,o.append("Authorization",i)),a&&(s.body=JSON.stringify(a)),"post"!==r.toLowerCase()&&"patch"!==r.toLowerCase()&&"put"!==r.toLowerCase()||o.append("Content-Type","application/json"),s.headers=o,u="https://e-vinci-course-api.azurewebsites.net/api/"+t,e.prev=9,e.next=12,fetch(u,s);case 12:if((d=e.sent).ok){e.next=22;break}return l=" Error code : "+d.status+" : "+d.statusText+"/nMessage : ",e.next=17,d.text();case 17:throw p=e.sent,l+=p,console.error("fetch() error",l),l.search("expired"),new Error(l);case 22:return e.next=24,d.json();case 24:return e.abrupt("return",e.sent);case 27:throw e.prev=27,e.t0=e.catch(9),e.t0;case 30:case"end":return e.stop()}}),e,null,[[9,27]])})))).apply(this,arguments)}},70144:function(e,t,r){r.d(t,{t:function(){return s}});var n=r(15861),a=r(87757),c=r.n(a),o=r(640);function s(e,t){return i.apply(this,arguments)}function i(){return(i=(0,n.Z)(c().mark((function e(t,r){var n,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=16;break}return n={scopes:["openid"],account:t[0]},e.prev=2,e.next=5,r.acquireTokenSilent(n);case 5:return a=e.sent,e.abrupt("return",a.idToken);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof o.Yo)){e.next=16;break}return e.next=14,r.acquireTokenRedirect(n);case 14:return s=e.sent,e.abrupt("return",s.idToken);case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}},43405:function(e,t,r){r.d(t,{w:function(){return n}});var n=function(e){var t=e.substring(0,e.indexOf("@")),r=t.substring(0,t.indexOf(".")),n=t.substring(t.indexOf(".")+1);return r=r.charAt(0).toUpperCase()+r.slice(1),(n=n.charAt(0).toUpperCase()+n.slice(1)).indexOf(".")>=0&&(n=(n=n.substring(n.indexOf(".")+1)).charAt(0).toUpperCase()+n.slice(1)),r+" "+n}}}]);
//# sourceMappingURL=component---src-pages-project-page-js-5a7b2fc4d515030013ce.js.map